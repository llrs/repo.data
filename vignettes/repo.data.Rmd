---
title: "repo.data"
output: markdown::html_format
vignette: >
  %\VignetteIndexEntry{repo.data}
  %\VignetteEngine{knitr::knitr}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
options(repos = c("@CRAN@" = "https://CRAN.R-project.org"))
library(repo.data)
```

Let's think a package that has some required dependencies, but its dependencies have some requirements too.
The maintainer might consider if he can raise the version requirements. 

```{r package_dependencies}
pd <- package_dependencies("ggeasy")
head(pd)
# Discover the requirements that can be upgraded
update_dependencies(pd)
```

We can also be interested on since when did a package can be installed we can use:

```{r package_date}
package_date("ggeasy")
```

Which will show when it was published and when the R dependencies required become available. 


##  Other utils

When were packages last updated?

```{r cran_sessions}
cran_session()
```


This uses the `sessionInfo()` output to find the date of last installation.
There is a sister function for an arbitrary data:

```{r cran_date}
versions <- data.frame(Package = c("dplyr", "Rcpp"),
                       Version = c("1.1.4", "0.8.9"))
versions
cran_date(versions)
```

This date doesn't mean that all packages are up to date to this given date (this can be easily checked with `old.packages()`)

## Risk of being archived

If you ever wonder which packages are at risk you can use `cran_doom()`:

```{r doom}
cd <- cran_doom(bioc = TRUE)
cd[c("time_till_last", "last_archived", "npackages")]
knitr::kable(head(cd$details))
```


For reproducibility here is the session info:  

```{r sessions}
sessionInfo()
```

